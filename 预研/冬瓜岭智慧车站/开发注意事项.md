### 前端

1. 搭建一套好完整的可视化场景工程，页面会嵌入到南瑞B端内
2. 支持postmessage以及pubsub接收指令
3. 做好心跳机制
4. 支持视频流的播放
5. 前端直接对接南瑞的HTTP接口以及websocket

### 后端

| 类型     | 说明                                       | 备注 |
| -------- | ------------------------------------------ | ---- |
| 数据接入 | 通过点表进行数据接入                       |      |
| restful  | 访问南瑞相关接口                           |      |
| push服务 | 1. 对接南瑞ws<br />2. 对接rabbitmq         |      |
| Mock数据 | 可能会有数据无法接入的情况，以自行模拟为主 |      |



### 场景

1. 调整底图的颜色

2. 调整初始视角

3. iframe嵌入默认参数，目前定义：底色、坐标、图层

4. 封装指令给到南瑞进行使用，eg:

   ```json
      {
          "action": "alarm",
          "level": 1,
          "color": "#444",
          "id": 188
      }
   ```
   
5. 支持设备周围弹窗显示，弹窗类型包括文本、图表、图片、视频等

6. 热力图，需要南瑞提供分区信息，航天预研如何实现，区分三维或者二维贴图

7. 设置多条巡检路线，以摄像头路线或者打卡机路线作为参考

8. 固定视角，不可拖动或者旋转，或者限定旋转范围

### 需要明确的事项

| 事项名称               | 说明                                                         | 待办                                                         |
| ---------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 视频流格式             | 1. 是rtsp还是其他格式                                        | 暂定以mp4播放，具体格式需要等南瑞沟通CCTV厂家之后确定        |
| 文本类弹窗             | 1.是否直接解析<br />2. 接受Vue Dom进行展示                   | 直接解析                                                     |
| 其他相关业务专题的设计 | 1. 按照之前讨论，我们这边也会出一个C端，内容展示的数据会参照B端的内容，因此要考虑这部分数据的接入 | 1、需要点表更新，找柳晗确定<br />2、若点表不支持，找南瑞刘鹏飞，协调郝工进行支持 |
| 兼容、适配程度         | 1. 屏幕尺寸、是否需要自适应（4k屏幕）<br />2. 支持的浏览器版本 | 4K屏幕、支持Chrome74.0以上                                   |
| 需要附件               | 1. 功能清单<br />                                            | 查看邮件附件                                                 |
| 调试                   | 后续远程部署，通过docker进行部署。后端无需针对智慧车站做任何处理，ws、http接口均使用南瑞的 | 需要部署，联系南瑞，远程部署即可                             |

### 长期支持修改的内容

1. 拆分gismap4功能，更加细致话（参数高可用和复用性）
2. 提供封装的组件库
3. 提供封装好的基础函数





